name: m3u8-watcher
on:
schedule:
- cron: '*/15 * * * *' # every 15 minutes
workflow_dispatch: {}


jobs:
check:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v4
with:
persist-credentials: true
- name: Set up Python
uses: actions/setup-python@v4
with:
python-version: '3.11'
- name: Install deps
run: |
python -m pip install --upgrade pip
pip install -r requirements.txt
# Playwright is optional; install only if used
playwright install --with-deps || true
- name: Run checker
id: run-checker
env:
TARGET_PAGE: https://rdxgoa.com/
KNOWN_CDN_BASE: https://g5nl6xoalpq6-hls-live.5centscdn.com/rdxgoa/
STREAM_NAME: rdxgoa
run: |
python checker.py
- name: Commit streams if changed
run: |
git config user.name "github-actions[bot]"
git config user.email "github-actions[bot]@users.noreply.github.com"
git add streams || true
if git diff --staged --quiet; then
echo "no changes to commit"
else
git commit -m "Update discovered .m3u8 files" || true
git push origin HEAD || echo "push failed"
fi
